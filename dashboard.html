<!doctype html>

<html>

<head>
	<title>PR Quality - Dashboard MVP</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

	<style type="text/css">
		body {
			background-color: #243746;
			color: #ffb259;
			padding: 50px;
		}

		.metric-widget {
			overflow: hidden;
		}

		.metric-widget__title {
			background-color: #ffb259;
			color: #243746;
			margin-bottom: 2px;
		}

		.metric-widget__chart {
			width: 100%; 
		}

		.metric-widget__chart > div > div {
			margin: 0 auto;
		}
	</style>

		<script type="text/javascript">
		var rawData = {
			"09": [
				{
				"prn": 277,
				"created_at": "2021-09-03 14:26:13 UTC",
				"closed_at": null,
				"number_of_commits": 1,
				"number_of_files": 1,
				"number_of_reviewers": 3,
				"comments": 2,
				"avg_commit_message_word_count": 6,
				"total_lines_changes": 16,
				"pr_message_word_count": 46
				}
			],
			"07": [
				{
				"prn": 261,
				"created_at": "2021-07-23 16:41:52 UTC",
				"closed_at": null,
				"number_of_commits": 6,
				"number_of_files": 10,
				"number_of_reviewers": 3,
				"comments": 0,
				"avg_commit_message_word_count": 30,
				"total_lines_changes": 30,
				"pr_message_word_count": 197
				}
			],
			"06": [
				{
				"prn": 252,
				"created_at": "2021-06-29 11:14:08 UTC",
				"closed_at": null,
				"number_of_commits": 1,
				"number_of_files": 1,
				"number_of_reviewers": 3,
				"comments": 0,
				"avg_commit_message_word_count": 34,
				"total_lines_changes": 2,
				"pr_message_word_count": 28
				},
				{
				"prn": 243,
				"created_at": "2021-06-04 10:57:12 UTC",
				"closed_at": null,
				"number_of_commits": 1,
				"number_of_files": 5,
				"number_of_reviewers": 4,
				"comments": 2,
				"avg_commit_message_word_count": 163,
				"total_lines_changes": 47,
				"pr_message_word_count": 175
				}
			],
			"05": [
				{
				"prn": 235,
				"created_at": "2021-05-12 16:40:03 UTC",
				"closed_at": null,
				"number_of_commits": 1,
				"number_of_files": 1,
				"number_of_reviewers": 2,
				"comments": 0,
				"avg_commit_message_word_count": 50,
				"total_lines_changes": 2,
				"pr_message_word_count": 44
				},
				{
				"prn": 234,
				"created_at": "2021-05-12 16:21:57 UTC",
				"closed_at": null,
				"number_of_commits": 1,
				"number_of_files": 1,
				"number_of_reviewers": 2,
				"comments": 0,
				"avg_commit_message_word_count": 17,
				"total_lines_changes": 18,
				"pr_message_word_count": 12
				},
				{
				"prn": 224,
				"created_at": "2021-05-04 12:47:47 UTC",
				"closed_at": null,
				"number_of_commits": 1,
				"number_of_files": 3,
				"number_of_reviewers": 3,
				"comments": 0,
				"avg_commit_message_word_count": 99,
				"total_lines_changes": 36,
				"pr_message_word_count": 120
				}
			],
			"04": [
				{
				"prn": 217,
				"created_at": "2021-04-23 16:47:53 UTC",
				"closed_at": null,
				"number_of_commits": 1,
				"number_of_files": 1,
				"number_of_reviewers": 3,
				"comments": 0,
				"avg_commit_message_word_count": 136,
				"total_lines_changes": 24,
				"pr_message_word_count": 137
				},
				{
				"prn": 216,
				"created_at": "2021-04-23 16:38:25 UTC",
				"closed_at": null,
				"number_of_commits": 1,
				"number_of_files": 1,
				"number_of_reviewers": 3,
				"comments": 0,
				"avg_commit_message_word_count": 88,
				"total_lines_changes": 2,
				"pr_message_word_count": 92
				},
				{
				"prn": 215,
				"created_at": "2021-04-21 14:45:34 UTC",
				"closed_at": null,
				"number_of_commits": 1,
				"number_of_files": 1,
				"number_of_reviewers": 3,
				"comments": 0,
				"avg_commit_message_word_count": 46,
				"total_lines_changes": 2,
				"pr_message_word_count": 39
				}
			],
			"03": [
				{
				"prn": 205,
				"created_at": "2021-03-30 10:13:12 UTC",
				"closed_at": null,
				"number_of_commits": 1,
				"number_of_files": 2,
				"number_of_reviewers": 3,
				"comments": 0,
				"avg_commit_message_word_count": 59,
				"total_lines_changes": 103,
				"pr_message_word_count": 53
				},
				{
				"prn": 200,
				"created_at": "2021-03-19 13:18:27 UTC",
				"closed_at": null,
				"number_of_commits": 3,
				"number_of_files": 3,
				"number_of_reviewers": 3,
				"comments": 6,
				"avg_commit_message_word_count": 11,
				"total_lines_changes": 29,
				"pr_message_word_count": 11
				},
				{
				"prn": 198,
				"created_at": "2021-03-18 17:26:33 UTC",
				"closed_at": null,
				"number_of_commits": 6,
				"number_of_files": 6,
				"number_of_reviewers": 3,
				"comments": 7,
				"avg_commit_message_word_count": 26,
				"total_lines_changes": 172,
				"pr_message_word_count": 128
				}
			],
			"02": [
				{
				"prn": 185,
				"created_at": "2021-02-19 14:32:39 UTC",
				"closed_at": null,
				"number_of_commits": 2,
				"number_of_files": 2,
				"number_of_reviewers": 3,
				"comments": 1,
				"avg_commit_message_word_count": 91,
				"total_lines_changes": 88,
				"pr_message_word_count": 150
				},
				{
				"prn": 184,
				"created_at": "2021-02-19 10:40:27 UTC",
				"closed_at": null,
				"number_of_commits": 2,
				"number_of_files": 4,
				"number_of_reviewers": 3,
				"comments": 7,
				"avg_commit_message_word_count": 16,
				"total_lines_changes": 53,
				"pr_message_word_count": 77
				}
			]
		}

		var parsedData = {};

		// Parse the raw data into a workable dataset.
		for (var month in rawData) {
			parsedData[month] = [];
		}

		for (var month in rawData) {

			if ( Object.hasOwnProperty.call(rawData, month) ) {
				var prCollection = rawData[month];
				
				for (let i = 0; i < prCollection.length; i++) {
					var prData = prCollection[i];
					
					for (var k in prData) {
						if (Object.hasOwnProperty.call(prData, k)) {
							var prValue = prData[k];
							
							if ( ! chartData[month].hasOwnProperty( k ) ) {
								parsedData[month][k] = []
							}

							parsedData[month][k].push( prValue );
						}
					}
				}
			}
		}

		// Generate the chartData.

		for (const key in object) {
			if (Object.hasOwnProperty.call(object, key)) {
				const element = object[key];
				
			}
		}

		var chartData = {
			"number_of_commits": [
				['01', 10],
				['02', 20],
				['03', 30],
				['04', 40],
				['05', 50],
				['06', 60],
				['07', 70],
				['08', 80],
				['09', 90],
				['10', 100],
				['11', 110],
				['12', 120]
			],
		}

		var chartOptions = {
			width: 500,
			height: 380,
			backgroundColor: '#f9fafb',
			legend: 'none',
			hAxis: {
				title: 'Month of the Year (2020)',
        	},
        	vAxis: {
          		title: 'Average Number'
        	}
		};

		google.charts.load('current', {'packages':['corechart']});

		// @TODO Make this dynamic!
		google.charts.setOnLoadCallback(drawMetricOne);
		// google.charts.setOnLoadCallback(drawMetricTwo);
		// google.charts.setOnLoadCallback(drawMetricThree);
		// google.charts.setOnLoadCallback(drawMetricFour);
		// google.charts.setOnLoadCallback(drawMetricFive);
		// google.charts.setOnLoadCallback(drawMetricSix);
		// google.charts.setOnLoadCallback(drawMetricSeven);

		// # METRIC ONE
		function drawMetricOne() {

			var data = new google.visualization.DataTable();

			data.addColumn('string', 'Month in 2020');
      		data.addColumn('number', 'Average Number');
			data.addRows( chartData.number_of_commits );

			var chart = new google.visualization.ColumnChart(document.getElementById('number_of_commits'));

			chart.draw(data, chartOptions);
		}

		// # METRIC TWO
		function drawMetricTwo() {

			var data = new google.visualization.DataTable();

			data.addColumn('string', 'Month in 2020');
      		data.addColumn('number', 'Average Number');
			data.addRows( chartData.number_of_files );

			var chart = new google.visualization.ColumnChart(document.getElementById('number_of_files'));

			chart.draw(data, chartOptions);
		}

		// # METRIC THREE
		function drawMetricThree() {

			var data = new google.visualization.DataTable();

			data.addColumn('string', 'Month in 2020');
      		data.addColumn('number', 'Average Number');
			data.addRows( chartData.number_of_reviewers );

			var chart = new google.visualization.ColumnChart(document.getElementById('number_of_reviewers'));

			chart.draw(data, chartOptions);
		}

		// # METRIC FOUR
		function drawMetricFour() {

			var data = new google.visualization.DataTable();

			data.addColumn('string', 'Month in 2020');
      		data.addColumn('number', 'Average Number');
			data.addRows( chartData.comments );

			var chart = new google.visualization.ColumnChart(document.getElementById('comments'));

			chart.draw(data, chartOptions);
		}

		// # METRIC FIVE
		function drawMetricFive() {

			var data = new google.visualization.DataTable();

			data.addColumn('string', 'Month in 2020');
      		data.addColumn('number', 'Average Number');
			data.addRows( chartData.avg_commit_message_word_count );

			var chart = new google.visualization.ColumnChart(document.getElementById('avg_commit_message_word_count'));

			chart.draw(data, chartOptions);
		}

		// # METRIC SIX
		function drawMetricSix() {

			var data = new google.visualization.DataTable();

			data.addColumn('string', 'Month in 2020');
      		data.addColumn('number', 'Average Number');
			data.addRows( chartData.total_lines_changes );

			var chart = new google.visualization.ColumnChart(document.getElementById('total_lines_changes'));

			chart.draw(data, chartOptions);
		}

		// # METRIC SIX
		function drawMetricSeven() {

			var data = new google.visualization.DataTable();

			data.addColumn('string', 'Month in 2020');
			data.addColumn('number', 'Average Number');
			data.addRows( chartData.pr_message_word_count );

			var chart = new google.visualization.ColumnChart(document.getElementById('pr_message_word_count'));

			chart.draw(data, chartOptions);
		}
	</script>

</head>

<body>

	<h1 class="text-4xl font-bold text-center mb-10">PR Quality - Dashboard MVP</h1>

	<div class="flex flex-wrap -mx-3 overflow-hidden">

		<div class="my-3 px-3 w-full overflow-hidden md:w-1/2 lg:w-1/3">
			
			<div class="metric-widget">

				<h2 class="metric-widget__title p-3 text-xl font-semibold text-center">Average Number of Commits</h2>

				<div id="number_of_commits" class="metric-widget__chart bg-gray-50"></div>

			</div>
			
		</div>
		
		<div class="my-3 px-3 w-full overflow-hidden md:w-1/2 lg:w-1/3">

			<div class="metric-widget">

				<h2 class="metric-widget__title p-3 text-xl font-semibold text-center">Average Number of Files Changed</h2>

				<div id="number_of_files" class="metric-widget__chart bg-gray-50"></div>

			</div>

		</div>
		
		<div class="my-3 px-3 w-full overflow-hidden md:w-1/2 lg:w-1/3">

			<div class="metric-widget">

				<h2 class="metric-widget__title p-3 text-xl font-semibold text-center">Average Number of Reviewers</h2>

				<div id="number_of_reviewers" class="metric-widget__chart bg-gray-50"></div>

			</div>

		</div>
		
		<div class="my-3 px-3 w-full overflow-hidden md:w-1/2 lg:w-1/3">

			<div class="metric-widget">

				<h2 class="metric-widget__title p-3 text-xl font-semibold text-center">Average Comments</h2>

				<div id="comments" class="metric-widget__chart bg-gray-50"></div>

			</div>

		</div>
		
		<div class="my-3 px-3 w-full overflow-hidden md:w-1/2 lg:w-1/3">

			<div class="metric-widget">

				<h2 class="metric-widget__title p-3 text-xl font-semibold text-center">Average Commit Word Count</h2>

				<div id="avg_commit_message_word_count" class="metric-widget__chart bg-gray-50"></div>

			</div>

		</div>
		
		<div class="my-3 px-3 w-full overflow-hidden md:w-1/2 lg:w-1/3">

			<div class="metric-widget">

				<h2 class="metric-widget__title p-3 text-xl font-semibold text-center">Average Total Lines Changed</h2>

				<div id="total_lines_changes" class="metric-widget__chart bg-gray-50"></div>

			</div>

		</div>

		<div class="my-3 px-3 w-full overflow-hidden md:w-1/2 lg:w-1/3">

			<div class="metric-widget">

				<h2 class="metric-widget__title p-3 text-xl font-semibold text-center">Average Body Word Count</h2>

				<div id="pr_message_word_count" class="metric-widget__chart bg-gray-50"></div>

			</div>

		</div>
		
	</div>

</body>

</html>